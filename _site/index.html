<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <meta name="description" content="Ryan's technology space">
    <meta name="author" content="Ryan Whitmire">
    <link rel="shortcut icon" href="favicon.png">
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>

    <title>Home</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">
    <link href="/css/site.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/vendor/html5shiv.js"></script>
    <script src="/js/vendor/respond.min.js"></script>
    <![endif]-->

    <script src="/js/vendor/jquery-1.11.0.min.js"></script>
    <script src="/js/vendor/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/"><i class="fa fa-home"></i> Home</a></li>
                        <li><a href="/archive"><i class="fa fa-folder-o"></i> Blog Archive</a></li>
                        <li><a href="http://github.com/rwhitmire" target="_blank"><i class="fa fa-github-alt"></i> Projects</a></li>
                        <li><a href="/about"><i class="fa fa-info"></i> About</a></li>
                        <li><a href="/contact"><i class="fa fa-envelope-o"></i> Contact</a></li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div><!--/.container-fluid -->
        </div>
        <div class="content">
            
<div itemscope itemtype="http://schema.org/Blog">



    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<article>
		<div class="header"><h1><a href="/2014/06/29/entity-framework-basics/">Entity Framework Basics</a></h1></div>
		<div class="content"><p>We recently had an incident in production at my place of employment where memory spikes were intermittently occuring
in one of our .NET web applications. The problem was eventually tracked back to some Entity Framework code
that had been written by a senior level developer. At first, I was shocked that this developer didn't understand the code
he had written and why the code was problematic. However, certain abstractions within the Entity Framework make this particular
issue very easy to overlook without a solid understanding of the library.</p>

<h2>What this post isn't about</h2>

<p>This post is not about showing you how to use Entity Framework or how to do "code first". This post is intended to help you
understand what exactly is going on behind the scenes, and how to prevent the situation described in the previous paragraph.
Most of the Entity Framework tutorials I've read mention nothing about the "magic" occuring as you write your fancy chained
linq statements to pull data out of a database. This is information you must know if you are looking to solve problems with EF.</p>

<h2>Materializing</h2>

<p>When considering the performance of your application, materializing has to be your #1 concern when using EF. So what is materializing?
I don't really know the official meaning of matrializing, but I think of it as <strong>transfering data into in-memory objects</strong>. That concept is
extremely important when using EF, and here is why.</p>

<p>Let's say we have the following service to get some data from our database:</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">ProductService</span> <span class="p">:</span> <span class="n">IProductService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">IRepository</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="n">_repository</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">ProductService</span><span class="p">(</span><span class="n">IRepository</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="n">repository</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_repository</span> <span class="p">=</span> <span class="n">repository</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="n">GetAllProducts</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// assume the GetAll method returns an IQueryable</span>
        <span class="k">return</span> <span class="n">_repository</span><span class="p">.</span><span class="n">GetAll</span><span class="p">().</span><span class="n">ToList</span><span class="p">();</span>
    <span class="p">}</span> 
<span class="p">}</span></code></pre></div>


<p>And then we have the following action method to display that data in a view:</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">ProductsController</span> <span class="p">:</span> <span class="n">Controller</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">IProductService</span> <span class="n">_productService</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">ProductsController</span><span class="p">(</span><span class="n">IProductService</span> <span class="n">productService</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_productService</span> <span class="p">=</span> <span class="n">productService</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">ShowProducts</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">sortedProducts</span> <span class="p">=</span> <span class="n">_productService</span><span class="p">.</span><span class="n">GetAllProducts</span><span class="p">().</span><span class="n">OrderBy</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">OrderDate</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">sortedProducts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>


<p>This is bad! If you know why this is bad, you can leave now - this post isn't meant for you. If you do not know why this
is bad, stop writing Entity Framework code immediately and don't do any more until you fully understand the contents of this blog post.</p>

<h2>IQueryable</h2>

<p>When you write an Entity Framework query, you are more than likely using common LINQ statements to fetch your data. For example:</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="n">IQueryable</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="n">GetNewProducts</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">newDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Today</span><span class="p">.</span><span class="n">AddDays</span><span class="p">(-</span><span class="m">10</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">products</span> <span class="p">=</span> <span class="n">_repository</span><span class="p">.</span><span class="n">GetAll</span><span class="p">().</span><span class="n">Where</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">CreatedDate</span> <span class="p">&gt;</span> <span class="n">newDate</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">products</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>


<p>If we debug this code and take a look at what's going on with that products collection, we see this:</p>

<p><img src="/images/entity-framework-basics/query-example.png" alt="Query" /></p>

<p>As you can see, our products haven't been queried yet. That LINQ statement is doing some magic to build a SQL
query. Now look at what happens if I add a <code>.ToList()</code> to the end of that LINQ statement:</p>

<p><img src="/images/entity-framework-basics/materialized.png" alt="Query" /></p>

<p>The SQL transaction has now been executed and your list is in memory. For the sake of this demonsration, my
product list is very small. However, a real-world production database could have millions or even billions of products
with a strategically placed index on the CreatedDate property. You do not want your web server sorting and querying
this data in memory. You want SQL server to do the work.</p>

<h2>So I should never use .ToList() right?</h2>

<p>Wrong. I would recommend using a <code>.ToList()</code> explicitly at some point to denote that you are now converting your
query into an in-memory list. Even better, wrap the <code>.ToList()</code> method into an extension called something like <code>.Materialize()</code>.
If your IQueryable ends up making it to the view, the view could end up doing all sorts of interesting things to materialize data.
When writing EF code, please be mindful of what is going on behind the scenes. Understand and write self-documenting code to explain exactly
where the query is executing. Doing this will prevent strange memory spikes from bogging down your software.</p>
</div>
	</article>


    </article>
    <hr>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<article>
		<div class="header"><h1><a href="/2014/03/25/android-tablet-raspberry-pi/">Using an Android Tablet as a Raspberry Pi Monitor</a></h1></div>
		<div class="content"><p>Over the past few months I've been addicted to the combined simplicity and awesomeness of the Raspberry Pi. When my mom got me one of these for Christmas, I thought it would be something that sat around and collected dust. However, I constantly find myself doing productive, fun things with the Pi. To date here is a list of things I've accomplished with my small $40 computer</p>

<ul>
<li>Created a continuous integration build light for my software team (almost in production)</li>
<li>Set up a media center for my basement which will soon be controlled by a Logitech Harmony remote</li>
<li>Emulated a Nintendo and played games from my childhood with friends</li>
<li>Set up my own private cloud server</li>
<li>Ran a node.js web server which can be accessed over the internet via DynDNS</li>
<li>configured my Nexus 7 tablet as a monitor for the Raspberry Pi</li>
</ul>


<p>While I could write entire books about any of these experiences, I'll be talking about the last one. I'm constantly on the go with my Raspberry Pi (I take it to work every day) and one of the most challenging parts of working on the machine is getting an SSH connection to it. I don't control the network at work and usually have to hardwire my laptop to the Pi with an ethernet cable, have a specific IP configuration for both devices, blah blah blah... It's a pain.</p>

<p>Yesterday, I spent about 2 hours searching the internet for a small portable TV. I wanted something high def and with an HDMI input. As it turns out, there is either a huge hole in the market, or I'm the only person looking for this kind of device. As I was looking for something with a 7" screen, it occurred to me that I have a very capable Nexus 7 tablet.</p>

<p>I started brainstorming and thinking about how I might be able to pull this off. I already knew I could connect over SSH or VNC through my local network. The problem with this approach is that I might not have a network while I'm on the go. I went to CodeMash in January, and wanted to hack on my Pi so badly, but I didn't have a device with HDMI, or a USB keyboard with me. If only I knew I could have used my little tablet and Logitech bluetooth keyboard. Here's what I should have done before heading off to CodeMash.</p>

<p><img src="/images/android-tablet-raspberry-pi/raspberry-nexus.jpg" alt="Nexus 7 Monitor" /></p>

<h3>Assumptions</h3>

<ul>
<li>you have Raspbian installed on your Pi</li>
<li>you have terminal access to your Pi</li>
<li>you have a tablet that can either be USB tethered, or rooted</li>
</ul>


<h3>List of ingredients to have this awesome setup:</h3>

<ul>
<li>1 Raspberry Pi computer</li>
<li>1 Bluetooth keyboard</li>
<li>1 Android tablet (needs to be able to USB tether - more on this later)</li>
<li>2 USB cables</li>
</ul>


<h3>How they connect:</h3>

<p>This is my favorite part of this approach. Sometimes working on the Pi is a pain because you have cables and devices all over the place. When I initially set up a Raspberry Pi, I need keyboard, ethernet cable, hdmi cable, power cable, mouse, 46" TV with HDMI input and my girlfriend can't watch TV. Here's what my setup looks like now:</p>

<p>power outlet - usb cable - raspberry pi - usb cable - nexus 7 - bluetooth keyboard - (happy girlfriend watching TV)</p>

<p>Another neat thing about this approach is that while you're tethering via USB, my tablet is also pulling some charge through the connection. The amount of power left over to charge the device is minimal, but The tablet's battery will last quite a bit longer this way.</p>

<h3>Configuring your Pi</h3>

<p>First, you're going to want to set up a static IP address for your usb connection.</p>

<p><code>sudo nano /etc/network/interfaces</code></p>

<p>Append the following lines to the end of the file</p>

<pre><code>iface usb0 inet static
address 192.168.42.42
netmask 255.255.255.0
network 192.168.42.0
gateway 192.168.42.129
broadcast 192.168.42.255
</code></pre>

<p><strong>Note</strong> your gateway might not be the same as mine. To see what your gateway address should be, do <code>arp -a</code> after you tether your tablet (directions for that are in the next section).</p>

<p>Next, install your VNC Server (or move on if you don't care about the GUI)</p>

<pre><code>sudo apt-get install tightvncserver
tightvncserver
vncserver :0 -geometry 1280x800
</code></pre>

<p>If you ever want to kill the VNC server</p>

<pre><code>vncserver -kill :0
</code></pre>

<p>NOTE: VNC Server will need to be restarted if you power down the Pi. There are ways to start the server at startup, but I won't cover that here.</p>

<h3>Configuring your Android Tablet</h3>

<p>This was the biggest challenge I had to overcome. If you have Android 4.4, Google removed the ability to USB tether on WiFi only devices. If your device is able to tether through USB, you can skip forward to the next section. I ended up installing the incredibly awesome <a href="http://get.cm">Cyanogenmod</a>. If your device is compatible, I'd strongly recommend this approach. If your device isn't compatible, you'll have to find some way to root your device.</p>

<p>Once I had Cyanogenmod installed, the following option showed up in my settings.</p>

<p><img src="/images/android-tablet-raspberry-pi/tablet-menu.jpg" alt="Android Menu" /></p>

<p>Enabling tethering will give your Pi an IP address and your tablet will now have SSH and VNC access. Now you just need some apps. For SSH, I use <a href="https://play.google.com/store/apps/details?id=sk.vx.connectbot">VX ConnectBot</a>. Using this app with a bluetooth keyboard is pretty close to the same experience you would have if you were hacking right on the Pi.</p>

<p>For my VNC connection, I use <a href="https://play.google.com/store/apps/details?id=com.realvnc.viewer.android">VNC Viewer</a>.</p>

<h2>Final Thoughts</h2>

<p>If you like computers, and you don't have a Raspberry Pi, GO BUY ONE. It's hard to have buyer's remorse over a $40 computer that fits in the palm of your hand.</p>
</div>
	</article>


    </article>
    <hr>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<article>
		<div class="header"><h1><a href="/2013/12/10/television-for-cheap/">Television for Cheap</a></h1></div>
		<div class="content"><p>
    I, like most, have been searching for a cheap way to watch all of the television I want for nearly a decade now.
    Technology is making this more possible than ever, but no matter what you do, it's still difficult to keep
    your monthly payments low without making any compromises.
</p>

<h3>Chosing a Provider</h3>

<p>
    The first thing you'll want to do is decide on a Cable or Satellite Dish provider. I went with DirecTV a few
    years ago. They have pretty decent customer service and for a sports fan like myself, they were the best
    value at the time. Dish has made some nice moves over the past year or two, but being a football fan, I really
    wanted NFL Sunday Ticket.
</p>

<h3>Technology!</h3>

<p>
    Do not buy a separate receiver for each room of your house. I'll speak about why in the next two paragraphs. I have
    three rooms I frequently want to watch T.V. in, but I don't want the added monthly charges.
</p>

<p>
    The second thing you'll want to do is invest in a <a href="http://www.slingbox.com/" target="_blank">SlingBox</a>.
    For under $200, you'll be able to watch your television from anywhere in the world provided you have
    an internet connection. You might be wondering how this can save you money. I'll tell you in a minute.
</p>

<img src="/assets/images/slingbox_plus_roku.jpg" alt="Roku Player">

<p>
    Buy a <a href="http://www.roku.com/" target="_blank">Roku player</a> for each additional room you want to watch television in. 
    Roku has a SlingPlayer app
    that will act as a client. My extra televisions are in the 30-40 inch range so the basic 720p model is fine for me. 
    Now you can watch T.V. in another room without a second receiver or cable box.
    The Roku SlingPlayer app will allow you to use your iPhone or Android device to change the channel. If you don't have a
    smart phone, an iPod touch or Nexus 7 should work just fine.
</p>

<p>
    Note that only one device can be logged into SlingBox at a time, so watching television in three rooms at
    once won't be an option.
</p>

<h3>Negotiate</h3>

<p>
    When my DirecTV contract expired, my bill shot up by about $20 per month. This was far more than I was
    willing to pay for television. I called and told customer service I wanted to cancel. The first person I spoke
    with attempted to convince me to switch to a cheaper package. Not an option - I needed the sports channels. After
    telling him I still wanted to cancel, he elevated my call.
</p>

<img src="/assets/images/googly-eyed-money.jpg" alt="money">

<p>
    The next person I spoke with asked me how much I wanted to pay. I said "umm $30 per month would be nice." He put me
    on hold for a few minutes and came back with an offer of around $40 per month (this is with Sunday Ticket included
    which is around $60 per month alone on a payment plan). I hesitated for a few seconds, and just before I said "ok",
    the kind man threw in a $150 credit. These companies are very interested in keeping your business. Threatening to
    leave will keep them honest.
</p></div>
	</article>


    </article>
    <hr>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<article>
		<div class="header"><h1><a href="/2013/10/19/send-messages-between-controllers-angular/">Sending Messages Between Controllers in Angular.js</a></h1></div>
		<div class="content"><p>
	If you're building a web application in angular.js, chances are you will have to send a message between
	one or more controllers. This is fairly simple to do through the use of services and callbacks.
</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;MyApp&quot;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">&#39;bridgeService&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">event</span><span class="p">;</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">send</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">){</span>
        <span class="nx">event</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">onReceive</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">action</span><span class="p">){</span>
        <span class="nx">event</span> <span class="o">=</span> <span class="nx">action</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;FooCtrl&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">bridgeService</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">sendMessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">bridgeService</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;BarCtrl&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">bridgeService</span><span class="p">){</span>
    <span class="nx">bridgeService</span><span class="p">.</span><span class="nx">onReceive</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">});</span></code></pre></div>

<p>
	this is an overly simple example. You'll probably want to set up an events array so you can subscribe
	more than one action at a time, but this should be enough to get you started.
	Here is a <a href="http://jsfiddle.net/rwhitmire/Yfs7d/1/" target="_blank">jsfiddle example</a> if you need a little more context.
</p></div>
	</article>


    </article>
    <hr>


</div>
<nav id="page-nav">
    
    
    <div class="text-center"><a href="/archive"><i class="fa fa-folder-o"></i> Blog Archive</a></div>
</nav>

<hr>
        </div>
        <footer>
            Copyright &copy; 2014 - Ryan Whitmire
        </footer>
    </div>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44983727-1', 'rwhitmire.com');
  ga('send', 'pageview');
</script>

</body>
</html>
